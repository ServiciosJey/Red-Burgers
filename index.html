<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RED BURGERS ‚Äî Pedido Online</title>
  <meta name="description" content="Haz tu pedido online en RED BURGERS. Selecciona cantidades, a√±ade al carrito y pide por WhatsApp." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#000;
      --paper:#0f0f10;
      --ink:#f2f2f3;
      --muted:#a3a7b0;
      --brand:#b00020;
      --line:#1f2126;
      --radius:18px;
      --shadow:0 10px 28px rgba(0,0,0,.45);
      --ok:#22c55e;
      --bad:#ef4444;
      --accent:#0b0b0d;
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    body{font-family:'Poppins',system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);background:var(--bg);-webkit-font-smoothing:antialiased}
    img{display:block;max-width:100%}
    button{font-family:inherit}

    /* ====== Top bar ====== */
    .topbar{position:sticky;top:0;z-index:60;background:rgba(0,0,0,.75);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--line)}
    .topbar-inner{max-width:560px;margin:0 auto;padding:10px 12px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .brand-badge{width:40px;height:40px;border-radius:999px;background:#111;border:1px solid var(--line);overflow:hidden}
    .brand-badge img{width:100%;height:100%;object-fit:contain}
    .icon-btn{width:36px;height:36px;border-radius:999px;border:1px solid var(--line);background:transparent;color:#fff;display:grid;place-items:center;box-shadow:none}
    .cart-btn{position:relative}
    .cart-count{position:absolute;top:-6px;right:-6px;background:#fff;color:#000;font-size:11px;min-width:18px;height:18px;border-radius:999px;display:grid;place-items:center;padding:0 5px;border:2px solid #000}

    /* ====== Search bar sticky ====== */
    .search-wrap{position:sticky;top:62px;z-index:55;background:rgba(0,0,0,.75);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--line)}
    .search-inner{max-width:560px;margin:0 auto;padding:8px 12px}
    #search{width:100%;border:1px solid var(--line);border-radius:12px;padding:12px;background:var(--accent);color:#fff;font-size:16px;outline:none}

    /* ====== Hero ====== */
    .hero{max-width:560px;margin:0 auto;padding:14px 16px 0}
    .hero-logo{width:92px;height:92px;border-radius:999px;border:4px solid #111;overflow:hidden;margin:-30px auto 8px;background:#111;box-shadow:var(--shadow)}
    .hero-logo img{width:100%;height:100%;object-fit:contain}
    .title{font-weight:700;text-align:center;font-size:22px}
    .rating{display:none} /* oculto estrellas */

    .meta{display:flex;gap:8px;align-items:center;justify-content:center;color:var(--muted);font-size:13px;flex-wrap:wrap}
    .hours-btn{all:unset;cursor:pointer;display:inline-flex;align-items:center;gap:6px;color:inherit}
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block}
    .dot.ok{background:var(--ok)}
    .dot.bad{background:var(--bad)}
    .tagline{color:var(--muted);text-align:center;margin-top:6px}

    /* ====== Contenido ====== */
    .container{max-width:560px;margin:12px auto 120px;padding:0 12px}
    .section{margin:16px 0}
    .section h3{font-size:18px; text-align:center; margin:10px 4px;color:var(--brand)}

    /* ====== Tarjetas ====== */
    .item{background:var(--paper);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);padding:12px;display:flex;flex-direction:column;gap:8px;max-width:420px;margin-left:auto;margin-right:auto;align-items:center;text-align:center}
    .item + .item{margin-top:10px}
    .thumb{width:100%;max-height:120px;overflow:hidden;border-radius:12px;border:1px solid var(--line)}
    .thumb img{width:auto;height:auto;max-width:100%;max-height:120px;object-fit:contain}
    .name{font-size:15px;font-weight:800;letter-spacing:.2px}
    .desc{font-size:12px;color:var(--muted);line-height:1.4}
    .price-qty{display:flex;align-items:center;justify-content:space-between;width:100%}
    .price{font-size:14px;font-weight:700}

    /* Qty with + and ‚àí */
    .qty{display:flex;align-items:center;gap:8px}
    .qty-btn{width:34px;height:34px;border-radius:10px;border:1px solid var(--line);background:var(--accent);color:#fff;font-size:18px;line-height:0;cursor:pointer}
    .qty input{width:56px;padding:8px;border-radius:10px;border:1px solid var(--line);background:var(--accent);color:var(--ink);text-align:center;font-size:16px}
    /* quitar flechas del number */
    .qty input::-webkit-outer-spin-button,
    .qty input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
    .qty input[type=number]{-moz-appearance:textfield}

    /* ====== Bot√≥n flotante A√±adir ====== */
    .fab-add{position:fixed;right:14px;bottom:14px;border:0;border-radius:999px;padding:14px 18px;font-weight:900;box-shadow:var(--shadow);cursor:pointer;color:#111;background:hsl(48, 90%, 58%);}
    .fab-add:disabled{opacity:.5;cursor:not-allowed}

    /* ====== Carrito ====== */
    dialog.cart{border:1px solid var(--line);border-radius:16px;padding:0;max-width:560px;width:94vw;background:#111;color:#fff}
    .cart-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
    .cart-items{max-height:55vh;overflow:auto}
    .cart-row{display:grid;grid-template-columns:56px 1fr auto;gap:10px;align-items:center;padding:10px 12px;border-bottom:1px solid #1b1c20}
    .cart-row img{width:56px;height:56px;border-radius:12px;object-fit:cover;border:1px solid var(--line)}
    .line .label{font-weight:700;font-size:14px}
    .line .meta{font-size:12px;color:var(--muted)}
    .controls{display:flex;align-items:center;gap:8px}
    .controls button{border:1px solid var(--line);background:#0b0b0d;color:#fff;border-radius:10px;padding:6px 10px}
    .cart-foot{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-top:1px solid var(--line)}
    .cart-foot .total{font-weight:800}
    .cart-foot .send{background:#25D366;color:#062d1c;border:0;border-radius:12px;padding:12px 16px;font-weight:900}

    /* ====== Form ====== */
    .form{padding:12px 16px;display:grid;gap:10px}
    .form input, .form textarea{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#0b0b0d;color:#fff}
    .form textarea{min-height:60px;resize:vertical}

    /* ====== Modal de horarios ====== */
    dialog.hours{border:1px solid var(--line);border-radius:16px;padding:0;max-width:420px;width:92vw;background:#111;color:#fff}
    .hours-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
    .hours-body{padding:12px 16px}
    .hours-body ul{list-style:none;margin:0;padding:0;display:grid;gap:8px}
    .hours-body li{display:flex;justify-content:space-between;color:#ddd}
    .close-btn{border:1px solid var(--line);background:transparent;color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}

    /* ====== Footer ====== */
    .site-foot{max-width:560px;margin:0 auto 40px; padding:16px 12px;color:var(--muted);border-top:1px solid var(--line);text-align:center}
    .site-foot a{color:#fff;text-decoration:none;border:1px solid var(--line);padding:10px 12px;border-radius:12px;display:inline-block;margin:6px}
    .hidden{display:none!important}
  </style>
</head>
<body>
  <!-- ====== Topbar (sin men√∫ de 3 rayas) ====== -->
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand-badge"><img src="https://i.postimg.cc/x1KV6bd0/logo-Red-burguers.png" alt="Logo RED BURGERS"></div>
      <div style="display:flex;gap:8px;align-items:center">
        <!-- Quitado el bot√≥n de b√∫squeda y el men√∫ -->
        <button id="cartBtn" class="icon-btn cart-btn" aria-label="Carrito">üõí<span id="cartCount" class="cart-count hidden">0</span></button>
      </div>
    </div>
  </header>

  <!-- ====== Barra de b√∫squeda SIEMPRE visible ====== -->
  <div class="search-wrap">
    <div class="search-inner">
      <input id="search" type="search" placeholder="Buscar en el men√∫‚Ä¶" />
    </div>
  </div>

  <!-- ====== Hero ====== -->
  <section class="hero">
    <div class="hero-logo"><img src="https://i.postimg.cc/x1KV6bd0/logo-Red-burguers.png" alt="RED BURGERS"></div>
    <div class="title">RED BURGERS</div>
    <!-- rating removido -->
    <div class="meta">
      <button id="hoursBtn" class="hours-btn" title="Ver horarios">
        <span id="statusDot" class="dot ok"></span>
        <span id="statusLabel">Abierto</span> ‚Ä¢ <span class="hours-range">12:00 PM‚Äì11:00 PM</span>
      </button>
      ‚Ä¢ üìç Calle Interior C #3, Santo Domingo
    </div>
    <div class="tagline">Smash & more</div>
  </section>

  <!-- ====== Men√∫ ====== -->
  <main id="menu" class="container"></main>

  <!-- ====== Bot√≥n flotante √∫nico ====== -->
  <button id="addAll" class="fab-add" title="A√±adir seleccionados al carrito">A√±adir</button>

  <!-- ====== Carrito ====== -->
  <dialog id="cartModal" class="cart">
    <div class="cart-head">
      <strong>Tu carrito</strong>
      <button id="closeCart" class="icon-btn" style="border:1px solid var(--line);background:transparent;color:#fff">‚úï</button>
    </div>

    <div class="form">
      <input id="cliNombre" placeholder="Nombre" />
      <input id="cliDireccion" placeholder="Direcci√≥n" />
      <textarea id="cliNota" placeholder="Nota"></textarea>
    </div>

    <div id="cartItems" class="cart-items"></div>
    <div class="cart-foot">
      <div class="total" id="cartTotal">Total: $0.00</div>
      <button id="sendWAModal" class="send">Pedir por WhatsApp</button>
    </div>
  </dialog>

  <!-- ====== Modal Horarios ====== -->
  <dialog id="hoursModal" class="hours">
    <div class="hours-head">
      <strong>Horarios</strong>
      <button class="close-btn" id="closeHours">Cerrar</button>
    </div>
    <div class="hours-body">
      <ul>
        <li><span>Lunes</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
        <li><span>Martes</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
        <li><span>Mi√©rcoles</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
        <li><span>Jueves</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
        <li><span>Viernes</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
        <li><span>S√°bado</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
        <li><span>Domingo</span><span>12:00 PM ‚Äì 11:00 PM</span></li>
      </ul>
    </div>
  </dialog>

  <!-- ====== Footer ====== -->
  <footer class="site-foot">
    <a href="tel:18094862675">Ll√°manos: (809) 486-2675</a>
    <a href="https://www.instagram.com/red_burgers_rd/" target="_blank" rel="noopener">Instagram: @red_burgers_rd</a>
  </footer>

  <script>
    // ================== CONFIG ==================
    const PHONE = '18094862675';
    const CURRENCY = '$';

    // ================== DATA ==================
    const SECTIONS = [
      { id:'pechuga', title:'Pechuga a la plancha' },
      { id:'burritos', title:'Burritos' },
      { id:'hotdog', title:'Hot Dog' },
      { id:'hamburguesas', title:'Hamburguesas' },
      { id:'bebidas', title:'Bebidas' },
    ];

    const ITEMS = [
      // Pechuga
      {id:'p1',cat:'pechuga',name:'Pechuga a la plancha con papas + ensalada',desc:'Pechuga sellada a la plancha con guarnici√≥n.',price:400,img:'https://i.postimg.cc/VvWb9WV3/Chat-GPT-Image-8-ago-2025-06-01-19-p-m.png'},
      {id:'p2',cat:'pechuga',name:'Pechuga a la crema + papas + ensalada',desc:'Salsa cremosa, papas fritas y ensalada.',price:500,img:'https://i.postimg.cc/WbKsWkcK/Plato-delicioso-con-pollo-y-ensalada.png'},
      {id:'p3',cat:'pechuga',name:'Pechuga a la plancha con salsa bbq, vegetales salteados, fritos o papas fritas',desc:'A tu elecci√≥n: vegetales, fritos o papas.',price:500,img:'https://i.postimg.cc/NfbH5bTX/Chat-GPT-Image-8-ago-2025-06-01-15-p-m.png'},

      // Burritos
      {id:'b1',cat:'burritos',name:'Burrito de pollo',desc:'Relleno de pollo, con papas incluidas.',price:350,img:'https://i.postimg.cc/YqtFrT4k/Chat-GPT-Image-8-ago-2025-06-01-02-p-m.png'},
      {id:'b2',cat:'burritos',name:'Burrito de res',desc:'Relleno de res, con papas incluidas.',price:350,img:'https://i.postimg.cc/VsqMczkD/Chat-GPT-Image-8-ago-2025-06-01-06-p-m.png'},
      {id:'b3',cat:'burritos',name:'Burrito mixto',desc:'Pollo y res, con papas incluidas.',price:400,img:'https://i.postimg.cc/sfmPb5mT/Burrito-delicioso-en-plato-blanco.png'},
      {id:'b4',cat:'burritos',name:'Burrito de pollo o res s√∫per picad',desc:'Versi√≥n s√∫per, bien cargado.',price:450,img:'https://i.postimg.cc/dVk87pYf/Burrito-sabroso-en-plato-blanco.png'},

      // Hot Dog
      {id:'h1',cat:'hotdog',name:'Hot Dog de res + papas',desc:'Cl√°sico de res con papas.',price:175,img:'https://i.postimg.cc/3JbXx7Pp/Hot-dog-y-papas-fritas.png'},
      {id:'h2',cat:'hotdog',name:'Hot Dog de pollo + papas',desc:'Salchicha de pollo + papas.',price:225,img:'https://i.postimg.cc/g038shrq/Perro-caliente-con-papas-fritas.png'},
      {id:'h3',cat:'hotdog',name:'Hot Dog sin papas',desc:'Solo el hot dog, sin acompa√±ante.',price:100,img:'https://i.postimg.cc/cLpffh1L/Perro-caliente-con-aderezos-y-cebolla.png'},
      {id:'h4',cat:'hotdog',name:'Hot Dog s√∫per "red" (res, ma√≠z, queso)',desc:'Gourmet con ma√≠z y queso.',price:400,img:'https://i.postimg.cc/8kZWZNk3/Perro-caliente-gourmet-con-aderezos.png'},

      // Hamburguesas
      {id:'g1',cat:'hamburguesas',name:'Hamburguesa de res, bacon, vegetales, papas y crema de hongos',desc:'Con papas y salsa de hongos.',price:550,img:'https://i.postimg.cc/G2rY5py0/Hamburguesa-con-papas-y-salsa.png'},
      {id:'g2',cat:'hamburguesas',name:'Hamburguesa ‚Äús√∫per‚Äù (res, bacon, papas, mozzarella frita)',desc:'Con mozzarella frita y papas.',price:400,img:'https://i.postimg.cc/J0zXRdxP/Hamburguesa-con-bacon-y-papas.png'},
      {id:'g3',cat:'hamburguesas',name:'Bacon cheese (normal)',desc:'Cl√°sica con bacon y queso.',price:250,img:'https://i.postimg.cc/L5Q15B0R/Hamburguesa-con-tocino-y-queso.png'},
      {id:'g4',cat:'hamburguesas',name:'Bacon cheese con vegetales y papas',desc:'Con vegetales y papas.',price:300,img:'https://i.postimg.cc/wT3NPZ7B/Hamburguesa-con-bacon-y-papas-fritas.png'},
      {id:'g5',cat:'hamburguesas',name:'Hamburguesa de pollo con mozzarella y papas',desc:'Pollo + mozzarella + papas.',price:350,img:'https://i.postimg.cc/dVyyQCRP/Hamburguesa-con-pollo-y-bacon.png'},
      {id:'g6',cat:'hamburguesas',name:'Hamburguesa de pollo con bacon, cheese, papas + ketchup',desc:'Pollo, bacon, queso y papas.',price:400,img:'https://i.postimg.cc/zXMh17gF/Hamburguesa-de-pollo-con-papas-fritas.png'},
      {id:'g7',cat:'hamburguesas',name:'Hamburguesa mar y tierra (res + pollo) con papas y vegetales',desc:'Doble prote√≠na con papas.',price:500,img:'https://i.postimg.cc/g0b6x04w/Hamburguesa-Surf-and-Turf-con-acompa-amiento.png'},

      // Bebidas
      {id:'d1',cat:'bebidas',name:'CocaCola',desc:'Botella fr√≠a.',price:35,img:'https://static.vecteezy.com/system/resources/previews/037/751/381/non_2x/coca-cola-plastic-bottle-isolated-on-transparent-background-free-png.png'},
      {id:'d2',cat:'bebidas',name:'Botella de Agua Dasani',desc:'600 ml.',price:25,img:'https://www.coca-cola.com/content/dam/onexp/pa/es/brands/dasani/dasani-600.jpg'},
      {id:'d3',cat:'bebidas',name:'Jugo de Naranja',desc:'Natural.',price:75,img:'https://png.pngtree.com/png-clipart/20210801/original/pngtree-orange-juice-healthy-orange-juicy-png-image_6577326.jpg'},
    ];

    // ================== RENDER ==================
    const menuEl = document.getElementById('menu');

    function money(v){return CURRENCY + Number(v).toFixed(2)}

    function itemCard(item){
      const el = document.createElement('article');
      el.className='item';
      el.innerHTML = `
        <div class="thumb"><img loading="lazy" src="${item.img}" alt="${item.name}"></div>
        <div class="name">${item.name.toUpperCase()}</div>
        <div class="desc">${item.desc||''}</div>
        <div class="price-qty">
          <div class="price">${money(item.price)}</div>
          <div class="qty">
            <button class="qty-btn" data-qty="-" data-id="${item.id}" aria-label="Restar">‚àí</button>
            <input type="number" inputmode="numeric" min="0" max="50" value="0" data-id="${item.id}" aria-label="Cantidad de ${item.name}">
            <button class="qty-btn" data-qty="+" data-id="${item.id}" aria-label="Sumar">+</button>
          </div>
        </div>`;
      return el;
    }

    function render(searched){
      menuEl.innerHTML='';
      const q = (searched||'').toLowerCase();
      SECTIONS.forEach(sec=>{
        const group = ITEMS.filter(i=>i.cat===sec.id && (!q || (i.name+" "+(i.desc||'')).toLowerCase().includes(q)) );
        if(!group.length) return;
        const secEl = document.createElement('section');
        secEl.className='section';
        secEl.innerHTML = `<h3>${sec.title}</h3>`;
        group.forEach(it=>secEl.appendChild(itemCard(it)));
        menuEl.appendChild(secEl);
      })
      updateFabTint();
    }

    // ====== FAB: lee cantidades y a√±ade al carrito ======
    const fab = document.getElementById('addAll');
    fab.onclick = ()=>{
      const inputs = document.querySelectorAll('input[data-id]');
      let added = 0;
      inputs.forEach(inp=>{
        const qty = Math.max(0, parseInt(inp.value||'0',10));
        if(qty>0){
          const item = ITEMS.find(i=>i.id===inp.dataset.id);
          addToCart(item, qty);
          added += qty;
          inp.value = '0';
        }
      });
      updateFabTint();
      if(added>0){ cartModal.showModal(); }
    };

    function updateFabTint(){
      let selected = 0;
      document.querySelectorAll('input[data-id]').forEach(i=> selected += Math.max(0, parseInt(i.value||'0',10)) );
      const lightness = Math.min(70, 58 + selected*1.2);
      fab.style.background = `hsl(48, 90%, ${lightness}%)`;
      fab.disabled = selected===0;
    }

    // Delegaciones: input para tinte y click para +/‚àí
    menuEl.addEventListener('input', (e)=>{
      if(e.target && e.target.matches('input[data-id]')) updateFabTint();
    });
    menuEl.addEventListener('click', (e)=>{
      const btn = e.target.closest('button[data-qty]');
      if(!btn) return;
      const id = btn.dataset.id;
      const inp = menuEl.querySelector(`input[data-id="${id}"]`);
      let v = Math.max(0, parseInt(inp.value||'0',10));
      if(btn.dataset.qty === '+') v = Math.min(50, v+1);
      else v = Math.max(0, v-1);
      inp.value = String(v);
      updateFabTint();
    });

    // ================== CART ==================
    const cart = new Map();
    const cartBtn = document.getElementById('cartBtn');
    const cartCount = document.getElementById('cartCount');
    const cartModal = document.getElementById('cartModal');
    const cartItems = document.getElementById('cartItems');

    function addToCart(item, qty){
      const line = cart.get(item.id) || {item, qty:0};
      line.qty += qty;
      cart.set(item.id, line);
      updateCartUI();
    }

    function cartTotals(){
      let count = 0, total = 0;
      for(const {item, qty} of cart.values()){ count += qty; total += item.price * qty; }
      return {count, total};
    }

    function updateCartUI(){
      const {count,total} = cartTotals();
      cartCount.textContent = count;
      cartCount.classList.toggle('hidden', count===0);
      renderCartModalItems();
      document.getElementById('cartTotal').textContent = 'Total: ' + money(total);
    }

    function renderCartModalItems(){
      if(!cart.size){ cartItems.innerHTML = '<div style="padding:20px;color:var(--muted)">Tu carrito est√° vac√≠o.</div>'; return; }
      const frag = document.createDocumentFragment();
      for(const [id,{item,qty}] of cart){
        const row = document.createElement('div');
        row.className = 'cart-row';
        row.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="line"><div class="label">${item.name}</div><div class="meta">${qty} √ó ${money(item.price)}</div></div>
          <div class="controls">
            <button data-act="-">‚àí</button>
            <span>${qty}</span>
            <button data-act="+">+</button>
            <button data-act="x">Eliminar</button>
          </div>`;
        row.querySelector('[data-act="+"]').onclick = ()=>{cart.get(id).qty++;updateCartUI()};
        row.querySelector('[data-act="-"]').onclick = ()=>{cart.get(id).qty=Math.max(1,cart.get(id).qty-1);updateCartUI()};
        row.querySelector('[data-act="x"]').onclick = ()=>{cart.delete(id);updateCartUI()};
        frag.appendChild(row);
      }
      cartItems.innerHTML='';
      cartItems.appendChild(frag);
    }

    // ================== WHATSAPP ==================
    function emojiFor(name){
      const n = name.toLowerCase();
      if(n.includes('burrito')) return 'üåØ';
      if(n.includes('hot dog')||n.includes('perro')) return 'üå≠';
      if(n.includes('hamburguesa')||n.includes('burger')) return 'üçî';
      if(n.includes('pechuga')||n.includes('pollo')) return 'üçó';
      if(n.includes('papas')) return 'üçü';
      if(n.includes('coca')||n.includes('refresco')||n.includes('soda')) return 'ü•§';
      if(n.includes('agua')) return 'üíß';
      if(n.includes('jugo')) return 'üßÉ';
      return 'üçΩÔ∏è';
    }

    function buildWAMessage(){
      if(!cart.size) return '';
      const lines = [];
      lines.push('*üçî RED BURGERS ‚Äî Nuevo pedido*');
      for(const {item,qty} of cart.values()){
        lines.push(`${emojiFor(item.name)} *${item.name}* √ó ${qty} ‚Äî ${money(item.price*qty)}`);
      }
      const { total } = cartTotals();
      lines.push('\n*Total:* ' + money(total));
      const nombre = document.getElementById('cliNombre').value || '';
      const direccion = document.getElementById('cliDireccion').value || '';
      const nota = document.getElementById('cliNota').value || '';
      lines.push('\n*Nombre:* ' + nombre);
      lines.push('*Direcci√≥n:* ' + direccion);
      lines.push('*Nota:* ' + nota);
      return lines.join('\n');
    }

    function openWA(){
      const text = buildWAMessage();
      if(!text) return;
      const url = `https://wa.me/${PHONE}?text=${encodeURIComponent(text)}`;
      window.open(url,'_blank');
    }
    document.getElementById('sendWAModal').onclick = openWA;

    // ================== Eventos UI ==================
    // (El bot√≥n de b√∫squeda fue eliminado; b√∫squeda siempre visible)
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', (e)=> render(e.target.value||'') );

    document.getElementById('cartBtn').onclick = ()=> cartModal.showModal();
    document.getElementById('closeCart').onclick = ()=> cartModal.close();

    // ====== Modal de horarios ======
    const hoursBtn = document.getElementById('hoursBtn');
    const hoursModal = document.getElementById('hoursModal');
    const closeHours = document.getElementById('closeHours');
    hoursBtn.onclick = ()=> hoursModal.showModal();
    closeHours.onclick = ()=> hoursModal.close();

    // ====== Estado Abierto/Cerrado ======
    const statusDot = document.getElementById('statusDot');
    const statusLabel = document.getElementById('statusLabel');

    function isOpenNow(d=new Date()){
      const open = new Date(d); open.setHours(12,0,0,0);
      const close = new Date(d); close.setHours(23,0,0,0);
      return d >= open && d <= close;
    }
    function updateOpenBadge(){
      const open = isOpenNow();
      statusDot.classList.toggle('ok', open);
      statusDot.classList.toggle('bad', !open);
      statusLabel.textContent = open ? 'Abierto' : 'Cerrado';
    }
    updateOpenBadge();
    setInterval(updateOpenBadge, 60*1000); // refresca cada minuto

    // ================== Tests r√°pidos ==================
    (function runTests(){
      try{
        console.assert(document.getElementById('cartTotal').textContent.includes('$0.00'), 'Total inicial debe ser $0.00');
        const backup = new Map(cart);
        // simular a√±adir
        addToCart(ITEMS[0], 2);
        const hasTwo = [...cart.values()].some(l=>l.item.id===ITEMS[0].id && l.qty===2);
        console.assert(hasTwo, 'Se agregaron 2 unidades');
        cart.clear(); backup.forEach((v,k)=>cart.set(k,v)); updateCartUI();
        console.log('%cTests OK','color:#0f0');
      }catch(e){ console.error('Tests fallaron:', e); }
    })();

    // Init
    render();
    updateFabTint();
    updateCartUI();
  </script>
</body>
</html>

